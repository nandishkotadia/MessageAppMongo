<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->

<!-- Mirrored from www.seantheme.com/color-admin-v1.8/admin/html/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 26 Sep 2015 08:03:11 GMT -->
<head>
	<meta charset="utf-8" />
	<title>Color Admin | Dashboard</title>
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
	<meta content="" name="description" />
	<meta content="" name="author" />
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	
	<!-- ================== BEGIN BASE CSS STYLE ================== -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
	<link href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.0/jquery-ui.min.css" rel="stylesheet" />
	<link href="https://cdn.jsdelivr.net/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" />
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" />
	<link href="https://cdnjs.cloudflare.com/ajax/libs/emojify.js/0.9.5/emojify-emoticons.min.css" rel="stylesheet" />
	<link href="assets/css/animate.min.css" rel="stylesheet" />
	<link href="assets/css/style.min.css" rel="stylesheet" />
	<link href="assets/css/style-responsive.min.css" rel="stylesheet" />
	<link href="assets/css/theme/default.css" rel="stylesheet" id="theme" />
	
		<!-- ================== BEGIN BASE JS ================== -->
	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-migrate/1.1.0/jquery-migrate-1.1.0.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
	<script src="https://cdn.jsdelivr.net/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jQuery-slimScroll/1.3.8/jquery.slimscroll.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-sparklines/2.1.2/jquery.sparkline.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/0.3.4/sockjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/emojify.js/0.9.5/emojify.min.js"></script>
	<!-- ================== END BASE JS ================== -->
	
	<!-- ================== BEGIN PAGE LEVEL JS ================== -->
	<script src="assets/js/dashboard.min.js"></script>
	<script src="assets/js/apps.min.js"></script>
	
	<!-- ================== END PAGE LEVEL JS ================== -->
	
	
	<style type="text/css">
		.emoji {
		    width: 1.5em;
		    height: 1.5em;
		    display: inline-block;
		    margin-bottom: -0.25em;
		}
		.messageText{
			font-size:2em;
			margin-bottom: 5px !important;
		}
	</style>
	
	<!-- ================== END BASE CSS STYLE ================== -->
	
	<!-- ================== BEGIN PAGE LEVEL STYLE ================== -->

	<!-- ================== END PAGE LEVEL STYLE ================== -->
	
	<!-- ================== BEGIN BASE JS ================== -->
	<!-- ================== END BASE JS ================== -->
</head>
<body>
	<!-- begin #page-loader -->
	<div id="page-loader" class="fade in"><span class="spinner"></span></div>
	<!-- end #page-loader -->
	
	<!-- begin #page-container -->
	<div id="page-container" class="fade page-sidebar-fixed page-header-fixed">
		<!-- begin #header -->
		<div id="header" class="header navbar navbar-default navbar-fixed-top">
			<!-- begin container-fluid -->
			<div class="container-fluid">
				<!-- begin mobile sidebar expand / collapse button -->
				<div class="navbar-header">
					<a href="index-2.html" class="navbar-brand"><span class="navbar-logo"></span> Message App</a>
					<button type="button" class="navbar-toggle" data-click="sidebar-toggled">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
				</div>
				<!-- end mobile sidebar expand / collapse button -->
				
				<!-- begin header navigation right -->
				<ul class="nav navbar-nav navbar-right">
					<li>
						<form class="navbar-form full-width">
							<div class="form-group">
								<input type="text" class="form-control" placeholder="Enter keyword" />
								<button type="submit" class="btn btn-search"><i class="fa fa-search"></i></button>
							</div>
						</form>
					</li>
					<!-- <li class="dropdown">
						<a href="javascript:;" data-toggle="dropdown" class="dropdown-toggle f-s-14">
							<i class="fa fa-bell-o"></i>
							<span class="label">5</span>
						</a>
						<ul class="dropdown-menu media-list pull-right animated fadeInDown">
                            <li class="dropdown-header">Notifications (5)</li>
                            <li class="media">
                                <a href="javascript:;">
                                    <div class="media-left"><i class="fa fa-bug media-object bg-red"></i></div>
                                    <div class="media-body">
                                        <h6 class="media-heading">Server Error Reports</h6>
                                        <div class="text-muted f-s-11">3 minutes ago</div>
                                    </div>
                                </a>
                            </li>
                            <li class="media">
                                <a href="javascript:;">
                                    <div class="media-left"><img src="assets/img/user-1.jpg" class="media-object" alt="" /></div>
                                    <div class="media-body">
                                        <h6 class="media-heading">John Smith</h6>
                                        <p>Quisque pulvinar tellus sit amet sem scelerisque tincidunt.</p>
                                        <div class="text-muted f-s-11">25 minutes ago</div>
                                    </div>
                                </a>
                            </li>
                            <li class="media">
                                <a href="javascript:;">
                                    <div class="media-left"><img src="assets/img/user-2.jpg" class="media-object" alt="" /></div>
                                    <div class="media-body">
                                        <h6 class="media-heading">Olivia</h6>
                                        <p>Quisque pulvinar tellus sit amet sem scelerisque tincidunt.</p>
                                        <div class="text-muted f-s-11">35 minutes ago</div>
                                    </div>
                                </a>
                            </li>
                            <li class="media">
                                <a href="javascript:;">
                                    <div class="media-left"><i class="fa fa-plus media-object bg-green"></i></div>
                                    <div class="media-body">
                                        <h6 class="media-heading"> New User Registered</h6>
                                        <div class="text-muted f-s-11">1 hour ago</div>
                                    </div>
                                </a>
                            </li>
                            <li class="media">
                                <a href="javascript:;">
                                    <div class="media-left"><i class="fa fa-envelope media-object bg-blue"></i></div>
                                    <div class="media-body">
                                        <h6 class="media-heading"> New Email From John</h6>
                                        <div class="text-muted f-s-11">2 hour ago</div>
                                    </div>
                                </a>
                            </li>
                            <li class="dropdown-footer text-center">
                                <a href="javascript:;">View more</a>
                            </li>
						</ul>
					</li> -->
					<li class="dropdown navbar-user">
						<a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown">
							<!-- <img src="assets/img/user-13.jpg" alt="" />  -->
							<span class="hidden-xs infoName">Nandish Kotadia</span> <b class="caret"></b>
						</a>
						<ul class="dropdown-menu animated fadeInLeft">
							<li class="arrow"></li>
							<li><a href="javascript:;">Edit Profile</a></li>
							<li><a href="javascript:;"><span class="badge badge-danger pull-right">2</span> Inbox</a></li>
							<li><a href="javascript:;">Calendar</a></li>
							<li><a href="javascript:;">Setting</a></li>
							<li class="divider"></li>
							<li><a id="logout" href="javascript:;">Log Out</a></li>
						</ul>
					</li>
				</ul>
				<!-- end header navigation right -->
			</div>
			<!-- end container-fluid -->
		</div>
		<!-- end #header -->
		
		<!-- begin #sidebar -->
		<div id="sidebar" class="sidebar">
			<!-- begin sidebar scrollbar -->
			<div data-scrollbar="true" data-height="100%">
				<!-- begin sidebar user -->
				<ul class="nav">
					<li class="nav-profile">
						<div class="image">
							<a href="javascript:;"><!-- <img src="assets/img/user-13.jpg" alt="" /> --></a>
						</div>
						<div class="info">
							<span class="infoName">Nandish Kotadia</span>
							<small>Software Developer</small>
						</div>
					</li>
				</ul>
				<!-- end sidebar user -->
				<!-- begin sidebar nav -->
				<ul id="friendsList" class="nav">
					<li class="nav-header">Friends</li>

					<!-- <li class="has-sub">
						<a href="javascript:;">
							<span class="badge pull-right">10</span>
							<span>Nandish Kotadia</span>
						</a>
					</li> -->
			        <!-- begin sidebar minify button -->
					<li><a href="javascript:;" class="sidebar-minify-btn" data-click="sidebar-minify"><i class="fa fa-angle-double-left"></i></a></li>
			        <!-- end sidebar minify button -->
				</ul>
				<!-- end sidebar nav -->
			</div>
			<!-- end sidebar scrollbar -->
		</div>
		<div class="sidebar-bg"></div>
		<!-- end #sidebar -->
		
		<!-- begin #content -->
		<div id="content" class="content">
			<!-- begin breadcrumb -->
			<ol class="breadcrumb pull-right">
				<li><a href="javascript:;">Home</a></li>
				<li class="active">Messages</li>
			</ol>
			<!-- end breadcrumb -->
			<!-- begin page-header -->
			<h1 class="page-header">Message App <small>communication becomes easier with this...</small></h1>
			<!-- end page-header -->
			
			
			<!-- begin row -->
			<div class="row">
				<!-- begin col-8 -->
				<div class="col-md-8">
			
					<div class="panel panel-inverse" data-sortable-id="index-5">
						<div class="panel-heading">
							<div class="panel-heading-btn">
								
								<a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-success" data-click="panel-reload"><i class="fa fa-repeat"></i></a>
								<a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning" data-click="panel-collapse"><i class="fa fa-minus"></i></a>
								
							</div>
							<h4 class="panel-title" id="userSelectedText">Message - No user selected</h4>
						</div>
						<div class="panel-body">
							<div id="messageScroll" class="height-sm" data-scrollbar="true">
								<ul id="individualMessageDiv" class="media-list media-list-with-divider media-messaging">
									
								</ul>
							</div>
						</div>
						<div class="panel-footer">
							<form id = "sendName">
								<div class="input-group">
									<input type="text" id="messageContent" class="form-control bg-silver" placeholder="Enter message" />
									<span class="input-group-btn">
										<button class="btn btn-primary" type="submit"><i class="fa fa-pencil"></i></button>
									</span>
								</div>
							</form>
                        </div>
					</div>
				</div>
				<!-- end col-8 onclick="sendName();"-->
			</div>
			<!-- end row -->
		</div>
		<!-- end #content -->
		
        <!-- begin theme-panel -->
        <!-- <div class="theme-panel">
            <a href="javascript:;" data-click="theme-panel-expand" class="theme-collapse-btn"><i class="fa fa-cog"></i></a>
            <div class="theme-panel-content">
                <h5 class="m-t-0">Color Theme</h5>
                <ul class="theme-list clearfix">
                    <li class="active"><a href="javascript:;" class="bg-green" data-theme="default" data-click="theme-selector" data-toggle="tooltip" data-trigger="hover" data-container="body" data-title="Default">&nbsp;</a></li>
                    <li><a href="javascript:;" class="bg-red" data-theme="red" data-click="theme-selector" data-toggle="tooltip" data-trigger="hover" data-container="body" data-title="Red">&nbsp;</a></li>
                    <li><a href="javascript:;" class="bg-blue" data-theme="blue" data-click="theme-selector" data-toggle="tooltip" data-trigger="hover" data-container="body" data-title="Blue">&nbsp;</a></li>
                    <li><a href="javascript:;" class="bg-purple" data-theme="purple" data-click="theme-selector" data-toggle="tooltip" data-trigger="hover" data-container="body" data-title="Purple">&nbsp;</a></li>
                    <li><a href="javascript:;" class="bg-orange" data-theme="orange" data-click="theme-selector" data-toggle="tooltip" data-trigger="hover" data-container="body" data-title="Orange">&nbsp;</a></li>
                    <li><a href="javascript:;" class="bg-black" data-theme="black" data-click="theme-selector" data-toggle="tooltip" data-trigger="hover" data-container="body" data-title="Black">&nbsp;</a></li>
                </ul>
                <div class="divider"></div>
                <div class="row m-t-10">
                    <div class="col-md-5 control-label double-line">Header Styling</div>
                    <div class="col-md-7">
                        <select name="header-styling" class="form-control input-sm">
                            <option value="1">default</option>
                            <option value="2">inverse</option>
                        </select>
                    </div>
                </div>
                <div class="row m-t-10">
                    <div class="col-md-5 control-label">Header</div>
                    <div class="col-md-7">
                        <select name="header-fixed" class="form-control input-sm">
                            <option value="1">fixed</option>
                            <option value="2">default</option>
                        </select>
                    </div>
                </div>
                <div class="row m-t-10">
                    <div class="col-md-5 control-label double-line">Sidebar Styling</div>
                    <div class="col-md-7">
                        <select name="sidebar-styling" class="form-control input-sm">
                            <option value="1">default</option>
                            <option value="2">grid</option>
                        </select>
                    </div>
                </div>
                <div class="row m-t-10">
                    <div class="col-md-5 control-label">Sidebar</div>
                    <div class="col-md-7">
                        <select name="sidebar-fixed" class="form-control input-sm">
                            <option value="1">fixed</option>
                            <option value="2">default</option>
                        </select>
                    </div>
                </div>
                <div class="row m-t-10">
                    <div class="col-md-5 control-label double-line">Sidebar Gradient</div>
                    <div class="col-md-7">
                        <select name="content-gradient" class="form-control input-sm">
                            <option value="1">disabled</option>
                            <option value="2">enabled</option>
                        </select>
                    </div>
                </div>
                <div class="row m-t-10">
                    <div class="col-md-5 control-label double-line">Content Styling</div>
                    <div class="col-md-7">
                        <select name="content-styling" class="form-control input-sm">
                            <option value="1">default</option>
                            <option value="2">black</option>
                        </select>
                    </div>
                </div>
                <div class="row m-t-10">
                    <div class="col-md-12">
                        <a href="#" class="btn btn-inverse btn-block btn-sm" data-click="reset-local-storage"><i class="fa fa-refresh m-r-3"></i> Reset Local Storage</a>
                    </div>
                </div>
            </div>
        </div> -->
        <!-- end theme-panel -->
		
		<!-- begin scroll to top btn -->
		<a href="javascript:;" class="btn btn-icon btn-circle btn-success btn-scroll-to-top fade" data-click="scroll-top"><i class="fa fa-angle-up"></i></a>
		<!-- end scroll to top btn -->
	</div>
	<!-- end page container -->
	
	<script>
	var stompClient = null;
    var myId = localStorage.getItem("myId");
    var receiverId = 'z';
		$(document).ready(function() {
			App.init();
			Dashboard.init();
			
			emojify.setConfig({
			    img_dir          : 'assets/images/emoji'
			});
			
			
			if(myId)
	    	{
	    		var socket = new SockJS('/hello');
	            stompClient = Stomp.over(socket);
	            stompClient.connect({}, function(frame) {
	                /* setConnected(true); */
	                console.log('Connected: ' + frame);
	                stompClient.subscribe('/topic/greetings', function(greeting){
	                    showGreeting(JSON.parse(greeting.body).content);
	                }); 
	                
	                stompClient.subscribe('/topic/chat/'+myId, function(greeting){
	                    showChat(JSON.parse(greeting.body));
	                }); 
	                stompClient.subscribe('/topic/newUserNotifier', function(userDTO){
	                    var user = JSON.parse(userDTO.body);                 
	                	addUserInFriendsList(user['username'],user['displayName'],user['status'],0);
	                }); 
	                
	                stompClient.subscribe('/topic/message/'+myId, function(greeting){
	                	var data = JSON.parse(greeting.body);
	                	if(receiverId == data[0]['senderName']){
	                		showGreeting(data);	
	                	}else{
	                		addNotification(data);
	                	}
	                    
	                }); 
	                stompClient.subscribe('/topic/sendmessage/'+myId, function(greeting){
	                	var data = JSON.parse(greeting.body);
	                	showGreeting(data);
	                });
	                stompClient.subscribe('/topic/userStatus', function(statusDTO){
	                	var data = JSON.parse(statusDTO.body);
	                	if(myId != data['username']){
	                		showStatus(data);
	                	}
	                });
	                stompClient.send("/app/userStatus",{},JSON.stringify({'username':myId,'status':'ONLINE'}) );
	            });
	            
	          getFriendsList();			
	    	}
			$('#logout').click(function(){
				logout();
			});
		});

		$('#friendsList').on('click','a',function(e){
			/* alert(e.currentTarget.id); */
			getFriendChat(e);
		});
		
		function getFriendsList(){
			$.ajax({
	            type: 'GET',
	            url: '/user/'+myId+'/friends',
	            contentType: "application/json; charset=utf-8",
	            traditional: true,
	            success: function (data) {
	            	$.ajax({
	    	            type: 'GET',
	    	            url: '/users/'+myId+'/getunreadnotifications',
	    	            contentType: "application/json; charset=utf-8",
	    	            traditional: true,
	    	            success: function (unread) {    	
	    	                showFriends(data,unread);
	    	            }
	    	        });//ajax close   
	                //showFriends(data);
	            }
	        });//ajax close   
		}
		
		function getFriendChat(e){
			  if(receiverId && receiverId != e.currentTarget.id){
			    	if(receiverId == 'z'){
			    		receiverId = e.currentTarget.id;	
			    	}
			    	stompClient.send("/app/lastreadstatus",{},JSON.stringify({'senderUsername':myId,'receiverUsername':receiverId}) );
			    	receiverId = e.currentTarget.id;
					var displayNameText = $('#'+receiverId).find('.displayName').text();
					$('#userSelectedText').text('Message - '+displayNameText);
					
					var el = $('#'+receiverId).find('.badge');
					el[0].innerHTML='0';
					stompClient.send("/app/chat/sender/"+myId+"/receiver/"+receiverId,{},JSON.stringify({}) );
		    }
		}
		
		function logout(){
			if(receiverId != 'z'){
	    		stompClient.send("/app/lastreadstatus",{},JSON.stringify({'senderUsername':myId,'receiverUsername':receiverId}) );
	    	}
			stompClient.send("/app/userStatus",{},JSON.stringify({'username':myId,'status':'OFFLINE'}) );
			localStorage.clear();
			window.location.href='login.html';
		}
		
		function showStatus(data){
			var username = data['username'];
			var status = data['status'];
			var el = $('#'+username).find('.userStatus');
			if(status=='OFFLINE'){
				$(el).removeClass('btn-success');
				$(el).addClass('btn-danger');
			}else{
				$(el).removeClass('btn-danger');
				$(el).addClass('btn-success');	
			}
		}
		
		function addNotification(data){
			var senderName = data[0]['senderName'];
			var el = $('#'+senderName).find('.messageNum');
			var current = el[0].innerHTML;
			current = parseInt(current)+1;
			el[0].innerHTML=current;
		}
		
		function showFriends(friends,unread){	
			for(var i=0;i<friends.length;i++){
				var username = friends[i]['username'];
				var displayName = friends[i]['displayName'];
				var status = friends[i]['status'];
				/* <li class="has-sub">
				<a href="javascript:;">
					<span class="badge pull-right">10</span>
					<span>Nandish Kotadia</span>
				</a>
				</li> */
				if(username==myId){
					$('.infoName').text(displayName);
				}else{
					var notfication =0 ;
					for(var j=0;j<unread.length;j++){
						if(unread[j]['receiverUsername']==username){
							notification = unread[j]['noOfNotifications'];
							break;
						}
					}
					addUserInFriendsList(username,displayName,status,notification);
				}
			}
		}
		
		function addUserInFriendsList(username,displayName,status,notification){
			var response = document.getElementById('friendsList');
			var li = document.createElement('li');
			li.setAttribute('class', 'has-sub');
			var a = document.createElement('a');
			a.setAttribute('id', username);
			a.setAttribute('class', 'friend');
    		a.setAttribute('href', '#'); 
			var span1 = document.createElement('span');
			span1.setAttribute('class', 'messageNum badge pull-right');
			span1.innerHTML = notification;
			/* <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-success"></a> */
			var span3 = document.createElement('a');
			if(status=='OFFLINE'){
				span3.className = 'btn btn-xs btn-icon btn-circle btn-danger userStatus';
				span3.style.marginRight = '20px';
			}else{
				span3.className = 'btn btn-xs btn-icon btn-circle btn-success userStatus';
				span3.style.marginRight = '20px';
			}
			var span2 = document.createElement('span');
			span2.className = 'displayName';
			/* span2.setAttribute('id', username); */
			span2.innerHTML = displayName;
			a.appendChild(span3);
			a.appendChild(span1);
			a.appendChild(span2);
			
			li.appendChild(a);
			response.appendChild(li);
		}
		
		
		//function sendName() {
		$('#sendName').submit(function(e){
			 e.preventDefault();
            var messageContent = document.getElementById('messageContent').value;
            if(messageContent != ''){
	            //stompClient.send("/app/hello/sender/"+senderId+"/receiver/"+receiverId+"/", {}, JSON.stringify({ 'name': name}) );
	        	stompClient.send("/app/message/sender/"+myId+"/receiver/"+receiverId,{},JSON.stringify({ 'content': messageContent}) );
	        	$('#messageContent').val('');
            }
		});

        function showGreeting(message) {
        	/* <li class="media media-sm">
			<a href="javascript:;" class="pull-left">
				<img src="assets/img/user-7.jpg" alt="" class="media-object rounded-corner" />
			</a>
			<div class="media-body">
				<h5 class="media-heading">John Doe</h5>
				<p>Morbi molestie lorem quis accumsan elementum. Morbi condimentum nisl iaculis, laoreet risus sed, porta neque. Proin mi leo, dapibus at ligula a, aliquam consectetur metus.</p>
			</div>
			</li> */
			for(var i=0;i<message.length;i++){
				var messageContent = message[i]['content'];
				var receiverName = message[i]['receiverName'];
				var senderName = message[i]['senderName'];
				addMessageElement(messageContent,receiverName,senderName);
			}
			
			setTimeout(function(){
				$("#messageScroll").scrollTop(1000000);
			}, 100);
        }
        
        function showChat(message) {
        	/* <li class="media media-sm">
			<a href="javascript:;" class="pull-left">
				<img src="assets/img/user-7.jpg" alt="" class="media-object rounded-corner" />
			</a>
			<div class="media-body">
				<h5 class="media-heading">John Doe</h5>
				<p>Morbi molestie lorem quis accumsan elementum. Morbi condimentum nisl iaculis, laoreet risus sed, porta neque. Proin mi leo, dapibus at ligula a, aliquam consectetur metus.</p>
			</div>
			</li> */
			var response = document.getElementById('individualMessageDiv');
			response.innerHTML="";
			for(var i=0;i<message.length;i++){
				var messageContent = message[i]['content'];
				var receiverName = message[i]['receiverName'];
				var senderName = message[i]['senderName'];
				addMessageElement(messageContent,receiverName,senderName);
			}
			 //scroll to the last element in the div
			//$("#individualMessageDiv").scrollTop($("#individualMessageDiv")[0].scrollHeight);
			
			emojify.run(document.getElementById('individualMessageDiv')); 
			 
			setTimeout(function(){
				$("#messageScroll").scrollTop(1000000);
			}, 100);
			
						
        }
        
        function addMessageElement(messageContent,receiverName,senderName){
        	var response = document.getElementById('individualMessageDiv');
        	var my = false;
			if(senderName == myId){
				my=true;
			}
			
            var li = document.createElement('li');
            li.className="media media-sm"
            var a = document.createElement('a');
            if(my==true){
            	a.setAttribute('class', 'pull-right');
           	}else{
            	a.setAttribute('class', 'pull-left');
            }
            
            a.setAttribute('href', 'javascript:;');
            var img = document.createElement('img');
            img.setAttribute('src', 'assets/img/user-7.jpg');
            img.setAttribute('class', 'media-object rounded-corner');
            img.style.width='37px';
            a.appendChild(img);
            
            var div = document.createElement('div');
            if(my==true){
            	div.style.textAlign = "right";
            }
            div.setAttribute('class', 'media-body');
            /* var h5 = document.createElement('h5');
            h5.setAttribute('class', 'media-heading');
            h5.innerHTML = senderName; */
            
            var p = document.createElement('p');
            p.setAttribute('class','messageText');
            $(p).css({
            	"font-size":"14px"
          	});
            p.appendChild(document.createTextNode(messageContent));
            //div.appendChild(h5);
            div.appendChild(p);
            
            li.appendChild(a);
            li.appendChild(div);
            response.appendChild(li);
            
            emojify.run(document.getElementById('individualMessageDiv')); 
        }
	</script>
</body>

</html>
